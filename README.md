# Примитивная база данных

Простой инструмент командной строки для управления таблицами с поддержкой базовых типов столбцов (`int`, `str`, `bool`). Проект использует Python и Poetry для управления зависимостями.

## Установка

1. **Клонирование репозитория**:
   ```bash
   git clone git@github.com:o-nastasia/project-2_Osadchuk_M25-555.git
   cd project-2_Osadchuk_M25-555
   ```

2. **Установка Poetry** (если ещё не установлено):
   ```bash
   pip install poetry
   ```
   или
   ```bash
   brew install poetry
   ```

3. **Установка зависимостей**:
   ```bash
   make install
   ```

4. **Запуск приложения**:
   ```bash
   make database
   ```

## Управление таблицами

Инструмент предоставляет интерфейс командной строки для управления таблицами, хранящимися в файле метаданных JSON (`db_meta.json`). Ниже приведены доступные команды и их использование.

### Команды
- **create_table** `<имя_таблицы> <столбец1:тип> ...`: Создаёт новую таблицу с указанным именем и столбцами. Каждый столбец должен соответствовать формату `<имя_столбца>:<тип>`, где `тип` может быть `int`, `str` или `bool`. Столбец `ID:int` добавляется автоматически, если не указан.
- **list_tables**: Отображает список всех существующих таблиц.
- **drop_table** `<имя_таблицы>`: Удаляет указанную таблицу.
- **exit**: Выход из программы.
- **help**: Отображает справочное сообщение с доступными командами.

[![asciicast](https://asciinema.org/a/1d96mpowDd1IAfA7i3I6FhPrt.svg)](https://asciinema.org/a/1d96mpowDd1IAfA7i3I6FhPrt)

## Операции с данными
Помимо управления таблицами, инструмент поддерживает полный набор CRUD-операций (Create, Read, Update, Delete) для работы с данными внутри таблиц. Данные каждой таблицы хранятся в отдельных JSON-файлах в директории `data/` (например, `data/users.json` для таблицы `users`). Результаты команд `select` и `info` отображаются в форматированном виде с использованием библиотеки `prettytable`.

### Команды
- **insert into** `<имя_таблицы> values (<значение1>, <значение2>, ...)`: Создает новую запись в указанной таблице. Количество значений должно соответствовать количеству столбцов (за исключением автоматически генерируемого столбца `ID`). Значения должны соответствовать типам столбцов (`int`, `str` или `bool`). Строковые значения должны быть заключены в кавычки.
- **select from** `<имя_таблицы>`: Извлекает и отображает все записи из указанной таблицы.
- **select from** `<имя_таблицы> where <столбец> = <значение>`: Извлекает и отображает записи из указанной таблицы, соответствующие заданному условию.
- **update** `<имя_таблицы> set <столбец> = <новое_значение> where <столбец_условия> = <значение_условия>`: Обновляет записи в указанной таблице, изменяя значение указанного столбца для записей, соответствующих условию.
- **delete from** `<имя_таблицы> where <столбец> = <значение>`: Удаляет записи из указанной таблицы, соответствующие заданному условию.
- **info** `<имя_таблицы>`: Выводит информацию о таблице, включая список столбцов и их типы, а также количество записей.

[![asciicast](https://asciinema.org/a/h3oIHd37TH5AlA9mX6xM6G2vX.svg)](https://asciinema.org/a/h3oIHd37TH5AlA9mX6xM6G2vX)

### Пример использования
1. Запустите программу:
   ```bash
   make database
   ```

2. Создайте таблицу `users` со столбцами `name:str`, `age:int`, `is_active:bool`:
   ```
   Введите команду: create_table users name:str age:int is_active:bool
   ```
   Вывод:
   ```
   Таблица "users" успешно создана со столбцами: ID:int, name:str, age:int, is_active:bool
   ```

3. Вставьте новую запись в таблицу `users`:
   ```
   Введите команду: insert into users values ("Sergei", 28, true)
   ```
   Вывод:
   ```
   Запись с ID=1 успешно добавлена в таблицу "users".
   ```

4. Выберите все записи из таблицы `users`:
   ```
   Введите команду: select from users
   ```
   Вывод:
   ```
   +----+--------+-----+-----------+
   | ID |  name  | age | is_active |
   +----+--------+-----+-----------+
   | 1  | Sergei | 28  |    True   |
   +----+--------+-----+-----------+
   ```

5. Выберите записи, где `age = 28`:
   ```
   Введите команду: select from users where age = 28
   ```
   Вывод:
   ```
   +----+--------+-----+-----------+
   | ID |  name  | age | is_active |
   +----+--------+-----+-----------+
   | 1  | Sergei | 28  |    True   |
   +----+--------+-----+-----------+
   ```

6. Обновите возраст пользователя с именем `Sergei`:
   ```
   Введите команду: update users set age = 29 where name = "Sergei"
   ```
   Вывод:
   ```
   Запись с ID=1 в таблице "users" успешно обновлена.
   ```

7. Удалите запись с `ID = 1`:
   ```
   Введите команду: delete from users where ID = 1
   ```
   Вывод:
   ```
   Запись с ID=1 успешно удалена из таблицы "users".
   ```

8. Выведите информацию о таблице `users`:
   ```
   Введите команду: info users
   ```
   Вывод:
   ```
   Таблица: users
   Столбцы: ID:int, name:str, age:int, is_active:bool
   Количество записей: 0
   ```

9. Выйдите из программы:
   ```
   Введите команду: exit
   ```